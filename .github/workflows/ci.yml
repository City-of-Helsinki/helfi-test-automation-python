on: [push]
name: CI
env:
  TEST_AUTOMATION_REPOSITORY: "ghcr.io/city-of-helsinki/helfi-test-automation-python:1.0"

jobs:
  tests:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v2
        with:
          fetch-depth: 1

      - name: Build the project
        run: make create-project

      - name: Run tests
        run: docker-compose exec python-automation /bin/bash -c "robot -i GALLERY -A /helfi-robotframework/environments/ci.args -d robotframework-reports /helfi-robotframework/robotframework-tests/Teams/Dev/Platform/Article/Gallery.robot"
